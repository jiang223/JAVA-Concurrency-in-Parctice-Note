---
description: >-
  同步容器类将所有容器状态的访问都串行化，以实现它们的线程安全性。CurrentHashMap.CopyOnWriteList.Queue和BlockingQueue.
---

# 5.2并发容器

### 1、ConcurrentHashMap

* 不是将每个方法都再同意锁上同步并使得每次只能由一个线程访问容器，而是使用一种粒度更细的加锁机制来实现更大程度的共享，这种机制就是分段锁。
* 在分段锁中任意数量的线程读取Map,读取和写入操作可以并发地访问Map,在单线程环境中也只是损失非常小的性能。
* 提供的迭代器不会抛出ConcurrentModificationExecption,因此不需要在迭代过程中对容器加锁。返回的迭代器具有弱一致性，而非“及时失败”。弱一致性的迭代器可以容忍并发的修改，当创建迭代器时会遍历已有的元素，并可以（但是不保证）在迭代器被构造将修改操作反映给容器。



